/**
 * @package   PickMeUp - jQuery datepicker plugin
 * @author    Nazar Mokrynskyi <nazar@mokrynskyi.com>
 * @author    Stefan Petre <www.eyecon.ro>
 * @copyright Copyright (c) 2013-2016, Nazar Mokrynskyi
 * @copyright Copyright (c) 2008-2009, Stefan Petre
 * @license   MIT License, see license.txt
 */
(function(g){function q(){for(var g=new Date(this.toString()),l=28,q=g.getMonth();g.getMonth()==q;)++l,g.setDate(l);return l-1}g.addDays=function(g){this.setDate(this.getDate()+g)};g.addMonths=function(g){var l=this.getDate();this.setDate(1);this.setMonth(this.getMonth()+g);this.setDate(Math.min(l,q.apply(this)))};g.addYears=function(g){var l=this.getDate();this.setDate(1);this.setFullYear(this.getFullYear()+g);this.setDate(Math.min(l,q.apply(this)))};g.getDayOfYear=function(){var g=new Date(this.getFullYear(),
this.getMonth(),this.getDate(),0,0,0),l=new Date(this.getFullYear(),0,0,0,0,0);return Math.floor((g-l)/24*36E5)}})(Date.prototype);
(function(g){"function"===typeof define&&define.amd?define(["jquery"],g):"object"===typeof exports?g(require("jquery")):g(jQuery)})(function(g){function q(a,b){a=a.split(" ");for(var d=0;d<a.length;++d)a[d]+=b;return a.join(" ")}function A(){var a=g(this).data("pickmeup-options"),b=this.pickmeup,d=Math.floor(a.calendars/2),c=a.date,e=a.current,p=a.min?new Date(a.min):null,f=a.max?new Date(a.max):null,h,n,m,l,r,t;p&&(p.setDate(1),p.addMonths(1),p.addDays(-1));f&&(f.setDate(1),f.addMonths(1),f.addDays(-1));
b.find(".pmu-instance > :not(nav)").remove();for(var k=0;k<a.calendars;k++){h=new Date(e);l=b.find(".pmu-instance").eq(k);b.hasClass("pmu-view-years")?(h.addYears(12*(k-d)),n=h.getFullYear()-6+" - "+(h.getFullYear()+5)):b.hasClass("pmu-view-months")?(h.addYears(k-d),n=h.getFullYear()):b.hasClass("pmu-view-days")&&(h.addMonths(k-d),n=v(h,a.title_format,a.locale));if(!t&&f&&(t=new Date(h),a.select_day?t.addMonths(a.calendars-1):a.select_month?t.addYears(a.calendars-1):t.addYears(12*(a.calendars-1)),
t>f)){--k;e.addMonths(-1);t=void 0;continue}t=new Date(h);if(!r&&(r=new Date(h),r.setDate(1),r.addMonths(1),r.addDays(-1),p&&p>r)){--k;e.addMonths(1);r=void 0;continue}l.find(".pmu-month").text(n);m="";var q=function(b){return"range"==a.mode&&b>=(new Date(c[0])).getFullYear()&&b<=(new Date(c[1])).getFullYear()||"multiple"==a.mode&&-1!==c.reduce(function(a,c){a.push((new Date(c)).getFullYear());return a},[]).indexOf(b)||(new Date(c)).getFullYear()==b},x=function(b,d){var f=(new Date(c[0])).getFullYear(),
e=(new Date(c[1])).getFullYear(),g=(new Date(c[0])).getMonth(),h=(new Date(c[1])).getMonth();return"range"==a.mode&&b>f&&b<e||"range"==a.mode&&b==f&&b<e&&d>=g||"range"==a.mode&&b>f&&b==e&&d<=h||"range"==a.mode&&b==f&&b==e&&d>=g&&d<=h||"multiple"==a.mode&&-1!==c.reduce(function(a,b){b=new Date(b);a.push(b.getFullYear()+"-"+b.getMonth());return a},[]).indexOf(b+"-"+d)||(new Date(c)).getFullYear()==b&&(new Date(c)).getMonth()==d};(function(){for(var b=[],c=h.getFullYear()-6,d=(new Date(a.min)).getFullYear(),
f=(new Date(a.max)).getFullYear(),e,g=0;12>g;++g)e={text:c+g,class_name:[]},a.min&&e.text<d||a.max&&e.text>f?e.class_name.push("pmu-disabled"):q(e.text)&&e.class_name.push("pmu-selected"),e.class_name=e.class_name.join(" "),b.push(e);m+=w.body(b,"pmu-years")})();(function(){var b=[],c=h.getFullYear(),d=(new Date(a.min)).getFullYear(),e=(new Date(a.min)).getMonth(),f=(new Date(a.max)).getFullYear(),g=(new Date(a.max)).getMonth(),k,p;for(p=0;12>p;++p)k={text:a.locale.monthsShort[p],class_name:[]},a.min&&
(c<d||p<e&&c==d)||a.max&&(c>f||p>g&&c>=f)?k.class_name.push("pmu-disabled"):x(c,p)&&k.class_name.push("pmu-selected"),k.class_name=k.class_name.join(" "),b.push(k);m+=w.body(b,"pmu-months")})();(function(){var b=[],c=h.getMonth(),d=u(new Date).valueOf(),e,f,g,k,p;(function(){h.setDate(1);var b=(h.getDay()-a.first_day)%7;h.addDays(-(b+(0>b?7:0)))})();for(f=0;42>f;++f)e={text:h.getDate(),class_name:[]},c!=h.getMonth()&&e.class_name.push("pmu-not-in-month"),0==h.getDay()?e.class_name.push("pmu-sunday"):
6==h.getDay()&&e.class_name.push("pmu-saturday"),g=a.render(new Date(h))||{},k=h.valueOf(),p=a.min&&a.min>h||a.max&&a.max<h,g.disabled||p?e.class_name.push("pmu-disabled"):(g.selected||a.date.valueOf()==k||a.date instanceof Array&&a.date.reduce(function(a,b){return a||k===b.valueOf()},!1)||"range"==a.mode&&k>=a.date[0]&&k<=a.date[1])&&e.class_name.push("pmu-selected"),k==d&&e.class_name.push("pmu-today"),g.class_name&&e.class_name.push(g.class_name),e.class_name=e.class_name.join(" "),b.push(e),h.addDays(1);
m+=w.body(b,"pmu-days")})();l.append(m)}r.setDate(1);t.setDate(1);t.addMonths(1);t.addDays(-1);b.find(".pmu-prev").css("visibility",a.min&&a.min>=r?"hidden":"visible");b.find(".pmu-next").css("visibility",a.max&&a.max<=t?"hidden":"visible");a.fill.apply(this)}function l(a,b,d,c){var e;if(a instanceof Date||a instanceof Number)return u(new Date(a));if(!a)return u(new Date);if(a instanceof Array){a=a.slice();for(e=0;e<a.length;++e)a[e]=l(a[e]);return a}e=a.split(d);if(1<e.length)return e.forEach(function(a,
e,f){f[e]=l(g.trim(a),b,d,c)}),e;e=c.monthsShort.join(")(")+")("+c.months.join(")(");d=new RegExp("[^0-9a-zA-Z("+e+")]+");a=a.split(d);var p=b.split(d),f,h,n,m,q,r=new Date;for(e=0;e<a.length;e++)switch(p[e]){case "b":h=c.monthsShort.indexOf(a[e]);break;case "B":h=c.months.indexOf(a[e]);break;case "d":case "e":f=parseInt(a[e],10);break;case "m":h=parseInt(a[e],10)-1;break;case "Y":case "y":n=parseInt(a[e],10);n+=100<n?0:29>n?2E3:1900;break;case "H":case "I":case "k":case "l":m=parseInt(a[e],10);break;
case "P":case "p":/pm/i.test(a[e])&&12>m?m+=12:/am/i.test(a[e])&&12<=m&&(m-=12);break;case "M":q=parseInt(a[e],10)}f=new Date(void 0===n?r.getFullYear():n,void 0===h?r.getMonth():h,void 0===f?r.getDate():f,void 0===m?r.getHours():m,void 0===q?r.getMinutes():q,0);isNaN(1*f)&&(f=new Date);return u(f)}function u(a){a.setHours(0,0,0,0);return a}function v(a,b,d){var c=a.getMonth(),e=a.getDate(),g=a.getFullYear(),f=a.getDay(),h=a.getHours(),n=12<=h,m=n?h-12:h,l=a.getDayOfYear();0==m&&(m=12);var r=a.getMinutes(),
q=a.getSeconds();b=b.split("");for(var k,u=0;u<b.length;u++){k=b[u];switch(k){case "a":k=d.daysShort[f];break;case "A":k=d.days[f];break;case "b":k=d.monthsShort[c];break;case "B":k=d.months[c];break;case "C":k=1+Math.floor(g/100);break;case "d":k=10>e?"0"+e:e;break;case "e":k=e;break;case "H":k=10>h?"0"+h:h;break;case "I":k=10>m?"0"+m:m;break;case "j":k=100>l?10>l?"00"+l:"0"+l:l;break;case "k":k=h;break;case "l":k=m;break;case "m":k=9>c?"0"+(1+c):1+c;break;case "M":k=10>r?"0"+r:r;break;case "p":case "P":k=
n?"PM":"AM";break;case "s":k=Math.floor(a.getTime()/1E3);break;case "S":k=10>q?"0"+q:q;break;case "u":k=f+1;break;case "w":k=f;break;case "y":k=(""+g).substr(2,2);break;case "Y":k=g}b[u]=k}return b.join("")}function B(a){var b=g(this),d=b.data("pickmeup-options"),c,e;u(a);switch(d.mode){case "multiple":c=a.valueOf();for(e=0;e<d.date.length;++e)if(d.date[e].valueOf()===c){d.date.splice(e,1);break}e===d.date.length&&d.date.push(a);break;case "range":d.lastSel||(d.date[0]=a);a<=d.date[0]?(d.date[1]=
d.date[0],d.date[0]=a):d.date[1]=a;d.lastSel=!d.lastSel;break;default:d.date=a.valueOf()}a=x(d);b.is("input")&&b.val("single"==d.mode?a[0]:a[0].join(d.separator));d.change.apply(this,a);if(!d.flat&&d.hide_on_select&&("range"!=d.mode||!d.lastSel))return d.binded.hide(),!1}function C(a){a=g(a.target);a.hasClass("pmu-button")||(a=a.closest(".pmu-button"));if(a.length){if(a.hasClass("pmu-disabled"))return!1;var b=g(this).data("pickmeup-options"),d=a.parents(".pmu-instance").eq(0),c=d.parent(),e=g(".pmu-instance",
c).index(d);a.parent().is("nav")?a.hasClass("pmu-month")?(b.current.addMonths(e-Math.floor(b.calendars/2)),c.hasClass("pmu-view-years")?(b.current="single"!=b.mode?new Date(b.date[b.date.length-1]):new Date(b.date),b.select_day?c.removeClass("pmu-view-years").addClass("pmu-view-days"):b.select_month&&c.removeClass("pmu-view-years").addClass("pmu-view-months")):c.hasClass("pmu-view-months")?b.select_year?c.removeClass("pmu-view-months").addClass("pmu-view-years"):b.select_day&&c.removeClass("pmu-view-months").addClass("pmu-view-days"):
c.hasClass("pmu-view-days")&&(b.select_month?c.removeClass("pmu-view-days").addClass("pmu-view-months"):b.select_year&&c.removeClass("pmu-view-days").addClass("pmu-view-years"))):a.hasClass("pmu-prev")?b.binded.prev(!1):b.binded.next(!1):a.hasClass("pmu-disabled")||(c.hasClass("pmu-view-years")?(b.current.setFullYear(parseInt(a.text(),10)),b.select_month?c.removeClass("pmu-view-years").addClass("pmu-view-months"):b.select_day?c.removeClass("pmu-view-years").addClass("pmu-view-days"):b.binded.update_date(b.current)):
c.hasClass("pmu-view-months")?(b.current.setMonth(d.find(".pmu-months .pmu-button").index(a)),b.current.setFullYear(parseInt(d.find(".pmu-month").text(),10)),b.select_day?c.removeClass("pmu-view-months").addClass("pmu-view-days"):b.binded.update_date(b.current),b.current.addMonths(Math.floor(b.calendars/2)-e)):(d=parseInt(a.text(),10),c=new Date(b.current),c.addMonths(e-Math.floor(b.calendars/2)),a.hasClass("pmu-not-in-month")&&c.addMonths(15<d?-1:1),c.setDate(d),b.binded.update_date(c)));b.binded.fill()}return!1}
function x(a){var b;if("single"==a.mode)return b=new Date(a.date),[v(b,a.format,a.locale),b];b=[[],[]];g.each(a.date,function(d,c){var e=new Date(c);b[0].push(v(e,a.format,a.locale));b[1].push(e)});return b}function y(a){var b=this.pickmeup;if(a||!b.is(":visible")){var d=g(this);a=d.data("pickmeup-options");var c=d.offset(),e=document.documentElement.scrollLeft,p=document.documentElement.scrollTop,f=document.documentElement.clientWidth,h=document.documentElement.clientHeight,n=c.top,m=c.left;a.binded.fill();
d.is("input")&&(d.pickmeup("set_date",l(d.val()?d.val():a.default_date,a.format,a.separator,a.locale)).keydown(function(a){9==a.which&&d.pickmeup("hide")}),a.lastSel=!1);a.before_show();if(0!=a.show()&&!a.flat){switch(a.position){case "top":n-=b.outerHeight();break;case "left":m-=b.outerWidth();break;case "right":m+=this.offsetWidth;break;case "bottom":n+=this.offsetHeight}n+b.offsetHeight>p+h&&(n=c.top-b.offsetHeight);n<p&&(n=c.top+this.offsetHeight+b.offsetHeight);m+b.offsetWidth>e+f&&(m=c.left-
b.offsetWidth);m<e&&(m=c.left+this.offsetWidth);b.css({display:"inline-block",top:n+"px",left:m+"px"});g(document).on(q(a.trigger_event,a.events_namespace),a.binded.hide).on("resize"+a.events_namespace,[!0],a.binded.forced_show)}}}function D(){y.call(this,!0)}function E(a){if(!a||!a.target||a.target!=this&&!(this.pickmeup.get(0).compareDocumentPosition(a.target)&16)){a=this.pickmeup;var b=g(this).data("pickmeup-options");0!=b.hide()&&(a.hide(),g(document).off(q(b.trigger_event,b.events_namespace),
b.binded.hide).off("resize",b.binded.forced_show),b.lastSel=!1)}}function F(){var a=g(this).data("pickmeup-options");g(document).off(q(a.trigger_event,a.events_namespace),a.binded.hide).off("resize",a.binded.forced_show);a.binded.forced_show()}function G(){var a=g(this).data("pickmeup-options");"single"!=a.mode&&(a.date=[],a.lastSel=!1,a.binded.fill())}function H(a){"undefined"==typeof a&&(a=!0);var b=this.pickmeup,d=g(this).data("pickmeup-options");b.hasClass("pmu-view-years")?d.current.addYears(-12):
b.hasClass("pmu-view-months")?d.current.addYears(-1):b.hasClass("pmu-view-days")&&d.current.addMonths(-1);a&&d.binded.fill()}function I(a){"undefined"==typeof a&&(a=!0);var b=this.pickmeup,d=g(this).data("pickmeup-options");b.hasClass("pmu-view-years")?d.current.addYears(12):b.hasClass("pmu-view-months")?d.current.addYears(1):b.hasClass("pmu-view-days")&&d.current.addMonths(1);a&&d.binded.fill()}function J(a){var b=g(this).data("pickmeup-options"),d=x(b);return"string"===typeof a?(d=d[1],d.constructor==
Date?v(d,a,b.locale):d.map(function(c){return v(c,a,b.locale)})):d[a?0:1]}function K(a,b){var d=g(this),c=d.data("pickmeup-options"),e;c.date=l(a,c.format,c.separator,c.locale);if("single"!=c.mode)for(c.date instanceof Array?(c.date[0]=c.date[0]||l(new Date),"range"==c.mode&&(c.date[1]=c.date[1]||l(c.date[0]))):(c.date=[c.date],"range"==c.mode&&c.date.push(l(c.date[0]))),e=0;e<c.date.length;++e)c.date[e]=z(c.date[e],c.min,c.max);else c.date instanceof Array&&(c.date=c.date[0]),c.date=z(c.date,c.min,
c.max);if(!c.select_day)if(c.date instanceof Array)for(e=0;e<c.date.length;++e)c.date[e].setDate(1);else c.date.setDate(1);if("multiple"==c.mode)for(e=0;e<c.date.length;++e)c.date.indexOf(c.date[e])!==e&&(c.date.splice(e,1),--e);c.current=b?l(b):new Date("single"===c.mode?c.date:c.date[c.date.length-1]);c.current.setDate(1);c.binded.fill();d.is("input")&&!1!==c.default_date&&(e=x(c),d.val()||c.change.apply(this,e),d.val("single"==c.mode?e[0]:e[0].join(c.separator)))}function L(){var a=g(this),b=a.data("pickmeup-options");
a.removeData("pickmeup-options");a.off(b.events_namespace);g(document).off(b.events_namespace);g(this.pickmeup).remove()}function z(a,b,d){return b&&b>a?new Date(b):d&&d<a?new Date(d):a}var M=0;g.pickmeup=g.extend(g.pickmeup||{},{current:null,date:new Date,default_date:new Date,flat:!1,first_day:1,prev:"&#9664;",next:"&#9654;",mode:"single",select_year:!0,select_month:!0,select_day:!0,view:"days",calendars:1,format:"d-m-Y",title_format:"B, Y",position:"bottom",trigger_event:"click touchstart",class_name:"",
separator:" - ",hide_on_select:!1,min:null,max:null,render:function(){},change:function(){return!0},before_show:function(){return!0},show:function(){return!0},hide:function(){return!0},fill:function(){return!0},locale:{days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),daysShort:"Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),daysMin:"Su Mo Tu We Th Fr Sa Su".split(" "),months:"January February March April May June July August September October November December".split(" "),
monthsShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")}});var N={years:"pmu-view-years",months:"pmu-view-months",days:"pmu-view-days"},w={wrapper:'<div class="pickmeup" />',head:function(a){for(var b="",d=0;7>d;++d)b+="<div>"+a.day[d]+"</div>";return'<div class="pmu-instance"><nav><div class="pmu-prev pmu-button">'+a.prev+'</div><div class="pmu-month pmu-button" /><div class="pmu-next pmu-button">'+a.next+'</div></nav><nav class="pmu-day-of-week">'+b+"</nav></div>"},body:function(a,
b){for(var d="",c=0;c<a.length;++c)d+='<div class="'+a[c].class_name+' pmu-button">'+a[c].text+"</div>";return'<div class="'+b+'">'+d+"</div>"}};g.fn.pickmeup=function(a){if("string"===typeof a){var b,d=Array.prototype.slice.call(arguments,1);switch(a){case "hide":case "show":case "clear":case "update":case "prev":case "next":case "destroy":this.each(function(){if(b=g(this).data("pickmeup-options"))b.binded[a]()});break;case "get_date":return(b=this.data("pickmeup-options"))?b.binded.get_date(d[0]):
null;case "set_date":this.each(function(){(b=g(this).data("pickmeup-options"))&&b.binded[a].apply(this,d)})}return this}return this.each(function(){var b=g(this);if(!b.data("pickmeup-options")){var e,d,f=g.extend(!0,{},g.pickmeup,a||{});for(e in f)d=b.data("pmu-"+e),"undefined"!==typeof d&&(f[e]=d);"days"!=f.view||f.select_day||(f.view="months");"months"!=f.view||f.select_month||(f.view="years");"years"!=f.view||f.select_year||(f.view="days");"days"!=f.view||f.select_day||(f.view="months");f.calendars=
Math.max(1,parseInt(f.calendars,10)||1);f.mode=/single|multiple|range/.test(f.mode)?f.mode:"single";f.min&&(f.min=l(f.min,f.format,f.separator,f.locale),f.select_day||f.min.setDate(1));f.max&&(f.max=l(f.max,f.format,f.separator,f.locale),f.select_day||f.max.setDate(1));var h=g(w.wrapper);this.pickmeup=h;f.class_name&&h.addClass(f.class_name);var n="";for(e=0;e<f.calendars;e++)d=f.first_day,n+=w.head({prev:f.prev,next:f.next,day:[f.locale.daysMin[d++%7],f.locale.daysMin[d++%7],f.locale.daysMin[d++%
7],f.locale.daysMin[d++%7],f.locale.daysMin[d++%7],f.locale.daysMin[d++%7],f.locale.daysMin[d++%7]]});b.data("pickmeup-options",f);for(e in f)-1!=["render","change","before_show","show","hide"].indexOf(e)&&(f[e]=f[e].bind(this));f.binded={fill:A.bind(this),update_date:B.bind(this),click:C.bind(this),show:y.bind(this),forced_show:D.bind(this),hide:E.bind(this),update:F.bind(this),clear:G.bind(this),prev:H.bind(this),next:I.bind(this),get_date:J.bind(this),set_date:K.bind(this),destroy:L.bind(this)};
f.events_namespace=".pickmeup-"+ ++M;h.on(q(f.trigger_event,f.events_namespace),f.binded.click).addClass(N[f.view]).append(n).on(g.support.selectstart?"selectstart":"mousedown",function(a){a.preventDefault()});f.flat?h.appendTo(this).css({position:"relative",display:"inline-block"}):(h.appendTo(document.body),b.on(q(f.trigger_event,f.events_namespace),f.binded.show));f.binded.set_date(f.date,f.current)}})}});
